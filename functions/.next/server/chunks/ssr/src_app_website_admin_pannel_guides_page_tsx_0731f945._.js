module.exports=[84609,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(15618),e=a.i(84505),f=a.i(73320),g=a.i(99464),h=a.i(81560),i=a.i(87532),j=a.i(96438),k=a.i(94988),l=a.i(62067),m=a.i(55486),n=a.i(77929),o=a.i(77892),p=a.i(70194),q=a.i(83556),r=a.i(3529),s=a.i(23292);function t({open:a,onOpenChange:e,guide:f,onSuccess:g}){let[i,l]=(0,c.useState)({title:"",type:"Template",category:"",content:"",difficulty:"Beginner",premium:!1,isPublic:!0,accessType:"FREE",tags:"",externalUrl:"",whatYouWillLearn:[],includes:[]}),[m,o]=(0,c.useState)(!1);(0,c.useEffect)(()=>{f?l({title:f.title||"",type:f.type||"Template",category:f.category||"",content:f.content||"",difficulty:f.difficulty||"Beginner",premium:f.premium||!1,isPublic:f.isPublic??!0,accessType:f.accessType||"FREE",tags:f.tags?.join(", ")||"",externalUrl:f.externalUrl||"",whatYouWillLearn:f.whatYouWillLearn||[],includes:f.includes||[]}):l({title:"",type:"Template",category:"",content:"",difficulty:"Beginner",premium:!1,isPublic:!0,accessType:"FREE",tags:"",externalUrl:"",whatYouWillLearn:[],includes:[]})},[f,a]);let t=async a=>{a.preventDefault(),o(!0);try{let a={title:i.title.trim(),type:i.type,category:i.category.trim(),content:i.content.trim(),difficulty:i.difficulty,premium:i.premium,isPublic:i.isPublic,accessType:i.accessType,tags:i.tags.split(",").map(a=>a.trim()).filter(Boolean),externalUrl:i.externalUrl.trim(),whatYouWillLearn:i.whatYouWillLearn.filter(a=>a.trim()),includes:i.includes.filter(a=>a.trim())};f?await n.dbService.updateGuide(f.id,a)?(s.toast.success("Guide updated successfully!"),g(),e(!1)):s.toast.error("Failed to update guide"):await n.dbService.createGuide(a)?(s.toast.success("Guide created successfully!"),g(),e(!1)):s.toast.error("Failed to create guide")}catch(a){console.error("Error saving guide:",a),s.toast.error("An error occurred while saving the guide")}finally{o(!1)}},u=a=>{l({...i,[a]:[...i[a],""]})},v=(a,b)=>{let c=[...i[a]];c.splice(b,1),l({...i,[a]:c})},w=(a,b,c)=>{let d=[...i[a]];d[b]=c,l({...i,[a]:d})};return(0,b.jsx)(p.Dialog,{open:a,onOpenChange:e,children:(0,b.jsxs)(p.DialogContent,{className:"max-w-3xl max-h-[90vh] overflow-y-auto",children:[(0,b.jsx)(p.DialogHeader,{children:(0,b.jsx)(p.DialogTitle,{children:f?"Edit Digital Business Idea":"Add New Idea"})}),(0,b.jsxs)("form",{onSubmit:t,className:"space-y-6",children:[(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)("h3",{className:"font-semibold text-sm text-slate-700",children:"Basic Information"}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(q.Label,{htmlFor:"title",children:"Title *"}),(0,b.jsx)(k.Input,{id:"title",value:i.title,onChange:a=>l({...i,title:a.target.value}),required:!0,placeholder:"e.g., Notion Freelancer Kit"})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(q.Label,{htmlFor:"type",children:"Type *"}),(0,b.jsxs)("select",{id:"type",value:i.type,onChange:a=>l({...i,type:a.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary",required:!0,children:[(0,b.jsx)("option",{value:"Freelancing Kit",children:"Freelancing Kit"}),(0,b.jsx)("option",{value:"Template",children:"Template"}),(0,b.jsx)("option",{value:"Blueprint",children:"Blueprint"})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(q.Label,{htmlFor:"category",children:"Category *"}),(0,b.jsx)(k.Input,{id:"category",value:i.category,onChange:a=>l({...i,category:a.target.value}),required:!0,placeholder:"Business, Design, Tech"})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(q.Label,{htmlFor:"tags",children:"Tags (comma-separated)"}),(0,b.jsx)(k.Input,{id:"tags",value:i.tags,onChange:a=>l({...i,tags:a.target.value}),placeholder:"notion, productivity, freelance"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(q.Label,{htmlFor:"externalUrl",children:"External Resource URL (Start Reading Link)"}),(0,b.jsx)(k.Input,{id:"externalUrl",value:i.externalUrl,onChange:a=>l({...i,externalUrl:a.target.value}),placeholder:"https://notion.so/..."})]})]}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)("h3",{className:"font-semibold text-sm text-slate-700",children:"Content Details"}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)(q.Label,{children:"What You'll Learn"}),(0,b.jsxs)(j.Button,{type:"button",variant:"ghost",size:"sm",onClick:()=>u("whatYouWillLearn"),className:"text-primary hover:text-primary-dark",children:[(0,b.jsx)(d.Plus,{className:"size-4 mr-1"})," Add Item"]})]}),i.whatYouWillLearn.map((a,c)=>(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)(k.Input,{value:a,onChange:a=>w("whatYouWillLearn",c,a.target.value),placeholder:"e.g. How to structure your portfolio"}),(0,b.jsx)(j.Button,{type:"button",variant:"ghost",size:"icon",onClick:()=>v("whatYouWillLearn",c),className:"text-slate-400 hover:text-red-500",children:(0,b.jsx)(h.Trash2,{className:"size-4"})})]},c)),0===i.whatYouWillLearn.length&&(0,b.jsx)("p",{className:"text-xs text-slate-400 italic",children:"No learning points added yet."})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)(q.Label,{children:"Includes"}),(0,b.jsxs)(j.Button,{type:"button",variant:"ghost",size:"sm",onClick:()=>u("includes"),className:"text-primary hover:text-primary-dark",children:[(0,b.jsx)(d.Plus,{className:"size-4 mr-1"})," Add Item"]})]}),i.includes.map((a,c)=>(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)(k.Input,{value:a,onChange:a=>w("includes",c,a.target.value),placeholder:"e.g. 5 Email Templates"}),(0,b.jsx)(j.Button,{type:"button",variant:"ghost",size:"icon",onClick:()=>v("includes",c),className:"text-slate-400 hover:text-red-500",children:(0,b.jsx)(h.Trash2,{className:"size-4"})})]},c)),0===i.includes.length&&(0,b.jsx)("p",{className:"text-xs text-slate-400 italic",children:"No inclusions added yet."})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(q.Label,{htmlFor:"content",children:"Markdown Content *"}),(0,b.jsx)(r.Textarea,{id:"content",value:i.content,onChange:a=>l({...i,content:a.target.value}),required:!0,placeholder:"# Introduction...",rows:8,className:"font-mono text-sm"})]})]}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)("h3",{className:"font-semibold text-sm text-slate-700",children:"Settings"}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(q.Label,{htmlFor:"difficulty",children:"Difficulty"}),(0,b.jsxs)("select",{id:"difficulty",value:i.difficulty,onChange:a=>l({...i,difficulty:a.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary",children:[(0,b.jsx)("option",{value:"Beginner",children:"Beginner"}),(0,b.jsx)("option",{value:"Intermediate",children:"Intermediate"}),(0,b.jsx)("option",{value:"Advanced",children:"Advanced"})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(q.Label,{htmlFor:"accessType",children:"Access Type"}),(0,b.jsxs)("select",{id:"accessType",value:i.accessType,onChange:a=>l({...i,accessType:a.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary",children:[(0,b.jsx)("option",{value:"FREE",children:"Free"}),(0,b.jsx)("option",{value:"SUBSCRIPTION",children:"Subscription"}),(0,b.jsx)("option",{value:"ONE_TIME_PURCHASE",children:"One-time Purchase"})]})]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-6 pt-2",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("input",{type:"checkbox",id:"isPublic",checked:i.isPublic,onChange:a=>l({...i,isPublic:a.target.checked}),className:"size-4 rounded border-slate-300"}),(0,b.jsx)(q.Label,{htmlFor:"isPublic",className:"cursor-pointer",children:"Public (Visible)"})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("input",{type:"checkbox",id:"premium",checked:i.premium,onChange:a=>l({...i,premium:a.target.checked}),className:"size-4 rounded border-slate-300"}),(0,b.jsx)(q.Label,{htmlFor:"premium",className:"cursor-pointer",children:"Premium Only"})]})]})]}),(0,b.jsxs)(p.DialogFooter,{children:[(0,b.jsx)(j.Button,{type:"button",variant:"outline",onClick:()=>e(!1),disabled:m,children:"Cancel"}),(0,b.jsx)(j.Button,{type:"submit",disabled:m,children:m?"Saving...":f?"Update Idea":"Create Idea"})]})]})]})})}function u(){let[a,q]=(0,c.useState)([]),[r,u]=(0,c.useState)([]),[v,w]=(0,c.useState)(!0),[x,y]=(0,c.useState)(""),[z,A]=(0,c.useState)(null),[B,C]=(0,c.useState)(!1),[D,E]=(0,c.useState)(!1),[F,G]=(0,c.useState)(!1),[H,I]=(0,c.useState)(!1),[J,K]=(0,c.useState)([]),[L,M]=(0,c.useState)("all");(0,c.useEffect)(()=>{N()},[]),(0,c.useEffect)(()=>{O()},[x,a]);let N=async()=>{w(!0);try{let a=await n.dbService.getGuides();q(a.sort((a,b)=>(b.createdAt?.seconds||0)-(a.createdAt?.seconds||0)))}catch(a){console.error("Error loading guides:",a),s.toast.error("Failed to load guides")}finally{w(!1)}},O=()=>{let b=a;if(x.trim()){let a=x.toLowerCase();b=b.filter(b=>b.title.toLowerCase().includes(a)||b.category.toLowerCase().includes(a)||b.type.toLowerCase().includes(a))}"all"!==L&&(b=b.filter(a=>a.category.toLowerCase()===L.toLowerCase())),u(b)},P=["all",...new Set(a.map(a=>a.category).filter(Boolean))],Q=async a=>{let b=a.target.files?.[0];if(b){I(!0);try{let a=(await (0,o.parseGuidesExcelFile)(b)).filter(a=>a.title&&a.content);if(0===a.length)return void s.toast.error("No valid guides to import (Title and Content are required)");let c=0;for(let b of a)try{await n.dbService.createGuide(b),c++}catch(a){console.error("Failed to create guide:",b.title,a)}c>0&&(s.toast.success(`Successfully imported ${c} guides!`),N())}catch(a){console.error("Import error:",a),s.toast.error("Failed to import guides: "+a.message)}finally{I(!1),a.target.value=""}}},R=async()=>{if(confirm(`Are you sure you want to delete ${J.length} guides? This action cannot be undone.`))try{await n.dbService.batchDeleteGuides(J),s.toast.success(`${J.length} guides deleted successfully`),K([]),N()}catch(a){console.error("Bulk delete error:",a),s.toast.error("Failed to delete guides")}},S=async a=>{try{await n.dbService.deleteGuide(a),s.toast.success("Guide deleted successfully"),N()}catch(a){console.error("Delete error:",a),s.toast.error("Failed to delete guide")}},T=async a=>{try{await n.dbService.updateGuide(a.id,{premium:!a.premium}),s.toast.success(`Guide "${a.title}" updated to ${!a.premium?"Premium":"Free"}`),N()}catch(a){console.error("Toggle premium error:",a),s.toast.error("Failed to update premium status")}},U=async a=>{try{await n.dbService.updateGuide(a.id,{isPublic:!a.isPublic}),s.toast.success(`Guide "${a.title}" updated to ${!a.isPublic?"Public":"Private"}`),N()}catch(a){console.error("Toggle visibility error:",a),s.toast.error("Failed to update visibility status")}};return(0,b.jsxs)("div",{className:"space-y-8",children:[(0,b.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-8",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-3xl font-bold text-slate-900",children:"Digital Business Ideas"}),(0,b.jsx)("p",{className:"text-slate-500 mt-1",children:"Manage ideas, freelancing kits, and blueprints"})]}),(0,b.jsxs)("div",{className:"flex gap-3",children:[J.length>0&&(0,b.jsxs)(j.Button,{variant:"destructive",onClick:R,className:"animate-in fade-in slide-in-from-right-4",children:[(0,b.jsx)(h.Trash2,{className:"size-4 mr-2"}),"Delete (",J.length,")"]}),(0,b.jsxs)(j.Button,{variant:"outline",onClick:()=>{(0,o.downloadGuideTemplate)()},children:[(0,b.jsx)(e.Download,{className:"size-4 mr-2"}),"Template"]}),(0,b.jsxs)("label",{children:[(0,b.jsx)(j.Button,{variant:"outline",asChild:!0,children:(0,b.jsxs)("span",{children:[(0,b.jsx)(f.Upload,{className:"size-4 mr-2"}),"Import"]})}),(0,b.jsx)("input",{type:"file",accept:".xlsx,.xls",className:"hidden",onChange:Q})]}),(0,b.jsxs)(j.Button,{onClick:()=>E(!0),children:[(0,b.jsx)(d.Plus,{className:"size-4 mr-2"}),"New Idea"]})]})]}),(0,b.jsx)(l.Card,{className:"p-4 mb-6",children:(0,b.jsxs)("div",{className:"flex gap-4 items-center",children:[(0,b.jsxs)("div",{className:"flex-1 relative",children:[(0,b.jsx)(i.Search,{className:"absolute left-3 top-1/2 -translate-y-1/2 size-4 text-slate-400"}),(0,b.jsx)(k.Input,{placeholder:"Search guides...",value:x,onChange:a=>y(a.target.value),className:"pl-10"})]}),(0,b.jsx)("div",{className:"flex gap-2",children:P.map(a=>(0,b.jsx)(j.Button,{variant:L===a?"default":"outline",size:"sm",onClick:()=>M(a),className:"capitalize",children:a},a))})]})}),(0,b.jsx)(l.Card,{className:"overflow-hidden",children:v?(0,b.jsxs)("div",{className:"p-12 text-center",children:[(0,b.jsx)("div",{className:"inline-block size-8 border-4 border-primary border-t-transparent rounded-full animate-spin"}),(0,b.jsx)("p",{className:"mt-4 text-slate-500",children:"Loading guides..."})]}):0===r.length?(0,b.jsx)("div",{className:"p-12 text-center",children:(0,b.jsx)("p",{className:"text-slate-400",children:"No guides found"})}):(0,b.jsx)("div",{className:"overflow-x-auto",children:(0,b.jsxs)("table",{className:"w-full",children:[(0,b.jsx)("thead",{className:"bg-slate-50 border-b border-slate-200",children:(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider w-10",children:(0,b.jsx)("input",{type:"checkbox",checked:J.length===r.length&&r.length>0,onChange:a=>{a.target.checked?K(r.map(a=>a.id)):K([])},className:"rounded border-slate-300 text-primary focus:ring-primary h-4 w-4"})}),(0,b.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Title"}),(0,b.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Category"}),(0,b.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Type"}),(0,b.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Visibility"}),(0,b.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Premium"}),(0,b.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Actions"})]})}),(0,b.jsx)("tbody",{className:"bg-white divide-y divide-slate-200",children:r.map(a=>(0,b.jsxs)("tr",{className:`hover:bg-slate-50 ${J.includes(a.id)?"bg-blue-50":""}`,children:[(0,b.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,b.jsx)("input",{type:"checkbox",checked:J.includes(a.id),onChange:b=>{var c;return c=a.id,void(b.target.checked?K(a=>[...a,c]):K(a=>a.filter(a=>a!==c)))},className:"rounded border-slate-300 text-primary focus:ring-primary h-4 w-4"})}),(0,b.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,b.jsx)("div",{className:"font-medium text-slate-900",children:a.title})}),(0,b.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,b.jsx)(m.Badge,{variant:"secondary",children:a.category})}),(0,b.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,b.jsx)(m.Badge,{variant:"outline",children:a.type})}),(0,b.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,b.jsx)("button",{onClick:()=>U(a),className:`px-2 py-1 rounded-full text-xs font-medium ${a.isPublic?"bg-green-100 text-green-700 hover:bg-green-200":"bg-slate-100 text-slate-700 hover:bg-slate-200"}`,children:a.isPublic?"Public":"Private"})}),(0,b.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,b.jsx)("button",{onClick:()=>T(a),className:`px-2 py-1 rounded-full text-xs font-medium ${a.premium?"bg-amber-100 text-amber-700 hover:bg-amber-200":"bg-slate-100 text-slate-700 hover:bg-slate-200"}`,children:a.premium?"Premium":"Free"})}),(0,b.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-right",children:(0,b.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,b.jsx)(j.Button,{variant:"ghost",size:"sm",onClick:()=>{A(a),C(!0)},children:(0,b.jsx)(g.Pencil,{className:"size-4"})}),(0,b.jsx)(j.Button,{variant:"ghost",size:"sm",onClick:()=>{A(a),G(!0)},className:"text-red-600 hover:text-red-700 hover:bg-red-50",children:(0,b.jsx)(h.Trash2,{className:"size-4"})})]})})]},a.id))})]})})})]}),(0,b.jsx)(p.Dialog,{open:F,onOpenChange:G,children:(0,b.jsxs)(p.DialogContent,{children:[(0,b.jsx)(p.DialogHeader,{children:(0,b.jsx)(p.DialogTitle,{children:"Delete Idea"})}),(0,b.jsxs)("p",{className:"text-slate-600",children:["Are you sure you want to delete ",(0,b.jsx)("strong",{children:z?.title}),"? This action cannot be undone."]}),(0,b.jsxs)(p.DialogFooter,{children:[(0,b.jsx)(j.Button,{variant:"outline",onClick:()=>G(!1),children:"Cancel"}),(0,b.jsx)(j.Button,{variant:"destructive",onClick:()=>z&&S(z.id),children:"Delete"})]})]})}),(0,b.jsx)(t,{open:B,onOpenChange:C,guide:z,onSuccess:N}),(0,b.jsx)(t,{open:D,onOpenChange:E,guide:null,onSuccess:N})]})}a.s(["default",()=>u],84609)}];

//# sourceMappingURL=src_app_website_admin_pannel_guides_page_tsx_0731f945._.js.map